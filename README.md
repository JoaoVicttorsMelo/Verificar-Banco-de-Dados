<div align="center"> <h1>ğŸ“‚ Verificar Banco de Dados - Monitoramento do Tamanho dos Bancos de Dados das Lojas</h1> <img src="https://img.shields.io/badge/Ruby-2.7%2B-red" alt="Ruby Version"> <img src="https://img.shields.io/badge/License-MIT-blue" alt="License"> <img src="https://img.shields.io/badge/Status-Finalizado-green" alt="Status"> </div> <div> <h2>ğŸ“ DescriÃ§Ã£o</h2> <p><strong>Verificar Banco de Dados</strong> Ã© um projeto em Ruby que verifica o tamanho dos bancos de dados SQL Server das lojas. O aplicativo se conecta a cada banco de dados das lojas, executa um comando especÃ­fico do SQL Server para obter o espaÃ§o utilizado e, caso o tamanho seja maior que <strong>8,5 GB</strong>, registra a loja e o tamanho do banco. Em seguida, envia um e-mail com as informaÃ§Ãµes das lojas que excederam o limite definido.</p> </div> <div> <h2>ğŸš€ Funcionalidades</h2> <ul> <li>ğŸ”— <strong>ConexÃ£o com Bancos de Dados das Lojas</strong>: Conecta-se aos bancos de dados SQL Server de cada loja individualmente.</li> <li>ğŸ“ <strong>VerificaÃ§Ã£o do Tamanho do Banco de Dados</strong>: Executa um comando SQL para obter o tamanho atual do banco de dados.</li> <li>âš ï¸ <strong>DetecÃ§Ã£o de Excedentes</strong>: Verifica se o tamanho do banco de dados Ã© maior que 8,5 GB.</li> <li>ğŸ“ <strong>Registro das Lojas</strong>: Salva as informaÃ§Ãµes das lojas que excederam o limite definido.</li> <li>âœ‰ï¸ <strong>Envio de E-mails</strong>: Envia um e-mail com a lista das lojas e os respectivos tamanhos dos bancos de dados que excederam o limite.</li> </ul> </div> <div> <h2>ğŸ› ï¸ Tecnologias Utilizadas</h2> <ul> <li><strong>Linguagem</strong>: <img src="https://img.shields.io/badge/-Ruby-red" alt="Ruby"> Ruby 2.7+</li> <li><strong>Banco de Dados</strong>: SQL Server</li> <li><strong>Gemas</strong>: <ul> <li><code>tiny_tds</code>: ConexÃ£o com bancos de dados SQL Server.</li> <li><code>mail</code>: Envio de e-mails para notificaÃ§Ãµes.</li> <li><code>yaml</code>: Carregamento de arquivos de configuraÃ§Ã£o.</li> </ul> </li> </ul> </div> <div> <h2>ğŸ“‹ PrÃ©-requisitos</h2> <ul> <li>Ruby instalado na versÃ£o 2.7 ou superior.</li> <li>Acesso aos bancos de dados SQL Server das lojas.</li> <li>ConfiguraÃ§Ã£o adequada do arquivo <code>config.yml</code> com as credenciais de acesso aos bancos de dados e configuraÃ§Ãµes do aplicativo.</li> <li>DependÃªncias instaladas listadas no <code>Gemfile</code>.</li> </ul> </div> <div> <h2>ğŸ”§ InstalaÃ§Ã£o</h2> <ol> <li> <p><strong>Clone o repositÃ³rio</strong>:</p> <pre><code>git clone https://github.com/JoaoVicttorsMelo/Verificar-Banco-de-Dados.git cd Verificar-Banco-de-Dados </code></pre> </li> <li> <p><strong>Instale as dependÃªncias</strong>:</p> <pre><code>bundle install</code></pre> </li> <li> <p><strong>Configure o arquivo <code>config.yml</code></strong>:</p> <p>Crie um arquivo <code>config.yml</code> na raiz do projeto com as seguintes informaÃ§Ãµes:</p> <pre><code>database_lojas: username: 'usuario_lojas' password: 'senha_lojas' databases: - 'loja1_db' - 'loja2_db' - 'loja3_db' hosts: - 'endereco_loja1' - 'endereco_loja2' - 'endereco_loja3' port: 1433
email_settings: address: 'smtp.seuprovedor.com' port: 587 domain: 'seudominio.com' user_name: 'seu_email' password: 'sua_senha' authentication: 'plain' enable_starttls_auto: true recipients: - 'destinatario1@dominio.com' - 'destinatario2@dominio.com' </code></pre> <p>Certifique-se de substituir os valores pelas credenciais reais e adicionar todas as lojas que deseja monitorar.</p> </li>

</ol> </div> <div> <h2>ğŸš€ Uso</h2> <ol> <li> <p><strong>Executando a VerificaÃ§Ã£o de Bancos de Dados</strong>:</p> <p>VocÃª pode executar o script principal para iniciar o processo de verificaÃ§Ã£o:</p> <pre><code>ruby main.rb</code></pre> <p>Onde <code>main.rb</code>
  Ã© o arquivo que inicia a aplicaÃ§Ã£o.</p> </li> <li> <p><strong>Visualizando os Resultados</strong>:</p> <p>As lojas que possuem bancos de dados maiores que 8,5 GB serÃ£o registradas, e um e-mail serÃ¡ enviado com essas informaÃ§Ãµes.</p> </li> </ol> </div> <div> 
    <h2>ğŸ—‚ï¸ Estrutura do Projeto</h2> <pre><code>Verificar-Banco-de-Dados/ â”œâ”€â”€ config.yml â”œâ”€â”€ main.rb â”œâ”€â”€ verificar_banco.rb â”œâ”€â”€ enviar_email.rb â”œâ”€â”€ Gemfile â””â”€â”€ README.md </code></pre>
    <ul> <li><code>config.yml</code>: Arquivo de configuraÃ§Ã£o com as credenciais e configuraÃ§Ãµes do aplicativo.</li> <li><code>main.rb</code>: Script principal que inicia o processo de verificaÃ§Ã£o.</li> <li><code>verificar_banco.rb</code>:
      ContÃ©m a classe ou mÃ©todos para conexÃ£o e verificaÃ§Ã£o dos bancos de dados.</li> <li><code>enviar_email.rb</code>: MÃ³dulo responsÃ¡vel pelo envio de e-mails de notificaÃ§Ã£o.</li> <li><code>Gemfile</code>: Lista de gemas necessÃ¡rias para o projeto.</li> 
      <li><code>README.md</code>: Este arquivo.</li> </ul> </div> <div> 
        <h2>âœ¨ Funcionalidades Detalhadas</h2> <h3>ğŸ”— ConexÃ£o com Bancos de Dados das Lojas</h3> <p>O aplicativo se conecta a cada banco de dados das lojas usando as credenciais fornecidas no arquivo <code>config.yml</code>. 
          Ele utiliza a gem <code>tiny_tds</code> para estabelecer a conexÃ£o com o SQL Server.</p> <h3>ğŸ“ VerificaÃ§Ã£o do Tamanho do Banco de Dados</h3> <p>Executa um comando SQL especÃ­fico para obter o tamanho atual do banco de dados. 
            O comando utilizado Ã©:</p> <pre><code>EXEC sp_spaceused</code></pre> 
        <p>Este comando retorna o tamanho total do banco de dados em kbytes e o mesmo Ã© convertido em Gigabytes na funÃ§Ã£o <br><code>converter_kb_to_gb</code></p> <h3>âš ï¸ DetecÃ§Ã£o de Excedentes</h3> <p>O aplicativo verifica se o tamanho obtido Ã© maior que <strong>8,5 GB</strong>.
          Caso seja, registra as informaÃ§Ãµes da loja para notificaÃ§Ã£o.</p> <h3>âœ‰ï¸ Envio de E-mails</h3> <p>O mÃ³dulo <pre><code>enviar_email.rb</code></pre> envia um e-mail para os destinatÃ¡rios configurados com a lista das lojas que possuem bancos de dados maiores que o limite definido, 
            incluindo o tamanho dos bancos de dados.</p> </div> <div> <h2>âš™ï¸ ConfiguraÃ§Ã£o</h2> <h3>Arquivo <code>config.yml</code></h3> <p>ContÃ©m todas as configuraÃ§Ãµes necessÃ¡rias para a execuÃ§Ã£o do aplicativo, incluindo credenciais de acesso aos bancos de dados e
              configuraÃ§Ãµes de e-mail. Certifique-se de incluir todas as lojas que deseja monitorar, listando seus hosts e nomes de bancos de dados correspondentes.</p> <h3>MÃ³dulos Personalizados</h3> <p> <ul> <li><strong><code>verificar_banco.rb</code>
              </strong>: LÃ³gica de conexÃ£o e verificaÃ§Ã£o do tamanho dos bancos de dados das lojas.</li> <li><strong><code>enviar_email.rb</code></strong>: LÃ³gica para envio de e-mails com as informaÃ§Ãµes das lojas que excederam o limite.</li> </ul> </p> </div>
              <div> <h2>ğŸ¤ ContribuiÃ§Ã£o</h2> <p>ContribuiÃ§Ãµes sÃ£o bem-vindas! Sinta-se Ã  vontade para abrir <strong>issues</strong> e <strong>pull requests</strong>.</p> <ol> <li>FaÃ§a um <strong>fork</strong> do projeto.</li>
  <li>Crie uma nova branch: <code>git checkout -b feature/nova-funcionalidade</code>.</li> <li>Commit suas alteraÃ§Ãµes: <code>git commit -m 'Adiciona nova funcionalidade'</code>.</li> <li>FaÃ§a um push para a branch: <code>git push origin feature/nova-funcionalidade</code>.</li>
                <li>Abra um <strong>pull request</strong>.</li> </ol> </div> <div> <h2>ğŸ“„ LicenÃ§a</h2> <p>Este projeto estÃ¡ sob a licenÃ§a <a href="LICENSE">MIT</a>.</p> </div> <div> <h2>ğŸ“ Contato</h2> <p>âœ‰ï¸ Email:
                  <a href="mailto:joaovicttorsilveiramelo@gmail.com">joaovicttorsilveiramelo@gmail.com</a></p> </div>
