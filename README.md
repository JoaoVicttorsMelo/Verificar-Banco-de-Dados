<div align="center"> <h1>📂 Verificar Banco de Dados - Monitoramento do Tamanho dos Bancos de Dados das Lojas</h1> <img src="https://img.shields.io/badge/Ruby-2.7%2B-red" alt="Ruby Version"> <img src="https://img.shields.io/badge/License-MIT-blue" alt="License"> <img src="https://img.shields.io/badge/Status-Finalizado-green" alt="Status"> </div> <div> <h2>📝 Descrição</h2> <p><strong>Verificar Banco de Dados</strong> é um projeto em Ruby que verifica o tamanho dos bancos de dados SQL Server das lojas. O aplicativo se conecta a cada banco de dados das lojas, executa um comando específico do SQL Server para obter o espaço utilizado e, caso o tamanho seja maior que <strong>8,5 GB</strong>, registra a loja e o tamanho do banco. Em seguida, envia um e-mail com as informações das lojas que excederam o limite definido.</p> </div> <div> <h2>🚀 Funcionalidades</h2> <ul> <li>🔗 <strong>Conexão com Bancos de Dados das Lojas</strong>: Conecta-se aos bancos de dados SQL Server de cada loja individualmente.</li> <li>📏 <strong>Verificação do Tamanho do Banco de Dados</strong>: Executa um comando SQL para obter o tamanho atual do banco de dados.</li> <li>⚠️ <strong>Detecção de Excedentes</strong>: Verifica se o tamanho do banco de dados é maior que 8,5 GB.</li> <li>📝 <strong>Registro das Lojas</strong>: Salva as informações das lojas que excederam o limite definido.</li> <li>✉️ <strong>Envio de E-mails</strong>: Envia um e-mail com a lista das lojas e os respectivos tamanhos dos bancos de dados que excederam o limite.</li> </ul> </div> <div> <h2>🛠️ Tecnologias Utilizadas</h2> <ul> <li><strong>Linguagem</strong>: <img src="https://img.shields.io/badge/-Ruby-red" alt="Ruby"> Ruby 2.7+</li> <li><strong>Banco de Dados</strong>: SQL Server</li> <li><strong>Gemas</strong>: <ul> <li><code>tiny_tds</code>: Conexão com bancos de dados SQL Server.</li> <li><code>mail</code>: Envio de e-mails para notificações.</li> <li><code>yaml</code>: Carregamento de arquivos de configuração.</li> </ul> </li> </ul> </div> <div> <h2>📋 Pré-requisitos</h2> <ul> <li>Ruby instalado na versão 2.7 ou superior.</li> <li>Acesso aos bancos de dados SQL Server das lojas.</li> <li>Configuração adequada do arquivo <code>config.yml</code> com as credenciais de acesso aos bancos de dados e configurações do aplicativo.</li> <li>Dependências instaladas listadas no <code>Gemfile</code>.</li> </ul> </div> <div> <h2>🔧 Instalação</h2> <ol> <li> <p><strong>Clone o repositório</strong>:</p> <pre><code>git clone https://github.com/JoaoVicttorsMelo/Verificar-Banco-de-Dados.git cd Verificar-Banco-de-Dados </code></pre> </li> <li> <p><strong>Instale as dependências</strong>:</p> <pre><code>bundle install</code></pre> </li> <li> <p><strong>Configure o arquivo <code>config.yml</code></strong>:</p> <p>Crie um arquivo <code>config.yml</code> na raiz do projeto com as seguintes informações:</p> <pre><code>database_lojas: username: 'usuario_lojas' password: 'senha_lojas' databases: - 'loja1_db' - 'loja2_db' - 'loja3_db' hosts: - 'endereco_loja1' - 'endereco_loja2' - 'endereco_loja3' port: 1433
email_settings: address: 'smtp.seuprovedor.com' port: 587 domain: 'seudominio.com' user_name: 'seu_email' password: 'sua_senha' authentication: 'plain' enable_starttls_auto: true recipients: - 'destinatario1@dominio.com' - 'destinatario2@dominio.com' </code></pre> <p>Certifique-se de substituir os valores pelas credenciais reais e adicionar todas as lojas que deseja monitorar.</p> </li>

</ol> </div> <div> <h2>🚀 Uso</h2> <ol> <li> <p><strong>Executando a Verificação de Bancos de Dados</strong>:</p> <p>Você pode executar o script principal para iniciar o processo de verificação:</p> <pre><code>ruby main.rb</code></pre> <p>Onde <code>main.rb</code>
  é o arquivo que inicia a aplicação.</p> </li> <li> <p><strong>Visualizando os Resultados</strong>:</p> <p>As lojas que possuem bancos de dados maiores que 8,5 GB serão registradas, e um e-mail será enviado com essas informações.</p> </li> </ol> </div> <div> 
    <h2>🗂️ Estrutura do Projeto</h2> <pre><code>Verificar-Banco-de-Dados/ ├── config.yml ├── main.rb ├── verificar_banco.rb ├── enviar_email.rb ├── Gemfile └── README.md </code></pre>
    <ul> <li><code>config.yml</code>: Arquivo de configuração com as credenciais e configurações do aplicativo.</li> <li><code>main.rb</code>: Script principal que inicia o processo de verificação.</li> <li><code>verificar_banco.rb</code>:
      Contém a classe ou métodos para conexão e verificação dos bancos de dados.</li> <li><code>enviar_email.rb</code>: Módulo responsável pelo envio de e-mails de notificação.</li> <li><code>Gemfile</code>: Lista de gemas necessárias para o projeto.</li> 
      <li><code>README.md</code>: Este arquivo.</li> </ul> </div> <div> 
        <h2>✨ Funcionalidades Detalhadas</h2> <h3>🔗 Conexão com Bancos de Dados das Lojas</h3> <p>O aplicativo se conecta a cada banco de dados das lojas usando as credenciais fornecidas no arquivo <code>config.yml</code>. 
          Ele utiliza a gem <code>tiny_tds</code> para estabelecer a conexão com o SQL Server.</p> <h3>📏 Verificação do Tamanho do Banco de Dados</h3> <p>Executa um comando SQL específico para obter o tamanho atual do banco de dados. 
            O comando utilizado é:</p> <pre><code>EXEC sp_spaceused</code></pre> 
        <p>Este comando retorna o tamanho total do banco de dados em kbytes e o mesmo é convertido em Gigabytes na função <br><code>converter_kb_to_gb</code></p> <h3>⚠️ Detecção de Excedentes</h3> <p>O aplicativo verifica se o tamanho obtido é maior que <strong>8,5 GB</strong>.
          Caso seja, registra as informações da loja para notificação.</p> <h3>✉️ Envio de E-mails</h3> <p>O módulo <pre><code>enviar_email.rb</code></pre> envia um e-mail para os destinatários configurados com a lista das lojas que possuem bancos de dados maiores que o limite definido, 
            incluindo o tamanho dos bancos de dados.</p> </div> <div> <h2>⚙️ Configuração</h2> <h3>Arquivo <code>config.yml</code></h3> <p>Contém todas as configurações necessárias para a execução do aplicativo, incluindo credenciais de acesso aos bancos de dados e
              configurações de e-mail. Certifique-se de incluir todas as lojas que deseja monitorar, listando seus hosts e nomes de bancos de dados correspondentes.</p> <h3>Módulos Personalizados</h3> <p> <ul> <li><strong><code>verificar_banco.rb</code>
              </strong>: Lógica de conexão e verificação do tamanho dos bancos de dados das lojas.</li> <li><strong><code>enviar_email.rb</code></strong>: Lógica para envio de e-mails com as informações das lojas que excederam o limite.</li> </ul> </p> </div>
              <div> <h2>🤝 Contribuição</h2> <p>Contribuições são bem-vindas! Sinta-se à vontade para abrir <strong>issues</strong> e <strong>pull requests</strong>.</p> <ol> <li>Faça um <strong>fork</strong> do projeto.</li>
  <li>Crie uma nova branch: <code>git checkout -b feature/nova-funcionalidade</code>.</li> <li>Commit suas alterações: <code>git commit -m 'Adiciona nova funcionalidade'</code>.</li> <li>Faça um push para a branch: <code>git push origin feature/nova-funcionalidade</code>.</li>
                <li>Abra um <strong>pull request</strong>.</li> </ol> </div> <div> <h2>📄 Licença</h2> <p>Este projeto está sob a licença <a href="LICENSE">MIT</a>.</p> </div> <div> <h2>📞 Contato</h2> <p>✉️ Email:
                  <a href="mailto:joaovicttorsilveiramelo@gmail.com">joaovicttorsilveiramelo@gmail.com</a></p> </div>
